#include <stdio.h>

#include <math.h>



int main() {

    int r;

    int change, i = 0;

    double function, function2, max_value_y, max_value_x;

    float a, x, x2, b, difference;

    double mas[200];



    Metka:

    printf("%s", "Введите  x: ");

    scanf("%f", &x);

    getchar();



    printf("%s", "Введите x2 ");

    scanf("%f", &x2);

    getchar();



    printf("%s", "Введите a: ");

    scanf("%f", &a);

    getchar();



    printf("%s", "Введите параметр шага  ");

    scanf("%f", &b);

    getchar();



    printf("%s", "Введите разницу между функциями ");

    scanf("%f", &difference);

    getchar();





    printf("Введите 1 для вызова G, введите 2 для вызова F, введите 3 для вызова Y  \n");

    scanf("%i", &r);



    switch (r) {

        case 1:

            while (x < x2, x = x + b) {

                if ((function <= 0.00001) || (function >= 0.00001))

                    function = ((5 * (10 * pow(a, 2) - 11 * a * x + pow(x, 2))) /

                                (24 * pow(a, 2) - 49 * a * x + 15 * pow(x, 2)));

                printf("%lf \n", function);



                mas[i] = function;

                if (i > 1) {

                    max_value_y = mas[i];



                    if (max_value_y < mas[i - 1]) {



                        max_value_y = mas[i - 1];

                    }

                }

                i++;

                if (i > 200) {

                    printf("Превышено количество итераций,введите значения");

                    i = 0;

                    goto Metka;

                }



                function2 = ((5 * (10 * pow(a, 2) - 11 * a * (x + b) + pow(x + b, 2))) /

                             (24 * pow(a, 2) - 49 * a * (x + b) + 4 * pow((x + b), 2)));

                if (function2 - function < difference) {



                    b *= 2;

                    {

                        function2 = ((5 * (10 * pow(a, 2) - 11 * a * (x + b) + pow(x + b, 2))) /

                                     (24 * pow(a, 2) - 49 * a * (x + b) + 4 * pow((x + b), 2)));

                        {

                            if (x >= x2)

                                break;

                        }



                        if (i > 1) {



                            printf("G(max) = %f\n", max_value_y);

                            i = 0;

                        } else {

                            printf("G(max) = %f\n", function);

                        }



                        printf("x(max) =  %f\n", max_value_x);

                    }

                }

                printf("Если желаете посчитать другую функцию введите 1 \n");

                scanf("%d", &change);

                getchar();

                if (change == 1)

                    goto Metka;

                break;



                case 2:

                    while (x < x2, x = x + b) {

                        function = atan(30 * pow(a, 2) + 37 * a * x - 4 * pow(x, 2)) * -1;

                        printf("%f\n", function);



                        mas[i] = function;

                        if (i > 1) {



                            max_value_y = mas[i];



                            if (max_value_y < mas[i - 1]) {



                                max_value_y = mas[i - 1];

                            }

                            i++;

                            if (i > 200) {

                                printf("Превышено количество итераций,введите значения");

                                i = 0;

                                goto Metka;

                            }

                            function2 = atan(30 * pow(a, 2) + 37 * a * (x + b) - 4 * pow((x + b), 2)) * -1;



                            if (function2 - function > difference)

                                b *= 2;



                            function2 = atan(30 * pow(a, 2) + 37 * a * (x + b) - 4 * pow((x + b), 2)) * -1;

                            {

                                if (x >= x2)

                                    break;

                            }

                        }

                        if (i >= 1) {

                            printf("Y(max) = %f\n", max_value_y);

                            i = 0;

                        } else {

                            printf("Y(max) = %f\n", function);

                        }



                        printf("x(max) =  %f\n", max_value_x);

                    }



                printf("Если желаете посчитать другую функцию введите 1 \n");

                scanf("%d", &change);

                getchar();

                if (change == 1)

                    goto Metka;

                break;



                case 3:

                    while (x < x2, x = x + b) {

                        if (function > -1 && function < 1) {

                            function = sin(3 * pow(a, 2) + 7 * a * x + 4 * pow(x, 2));

                            printf("%f\n", function);



                            mas[i] = function;

                            if (i > 1) {

                                max_value_y = mas[i];



                                if (max_value_y < mas[i - 1]) {



                                    max_value_y = mas[i - 1];

                                }

                                i++;

                                if (i > 200) {

                                    printf("Превышено количество итераций,введите значения");

                                    i = 0;

                                    goto Metka;

                                }

                                if (function2 - function > difference)

                                    b *= 2;



                                function2 = sin(3 * pow(a, 2) + 7 * a * (x + b) + 4 * pow((x + b), 2));

                            }

                            if (x >= x2) {

                                break;

                            }

                        }

                        if (i > 1) {



                            printf("F(max) = %f\n", max_value_y);

                            i = 0;

                        } else {



                            printf("F(max) = %f\n", function);

                        }



                        printf("x(max) =  %f\n", max_value_x);



                        printf("Если желаете посчитать другую функцию введите 1 \n");

                        scanf("%d", &change);

                        getchar();

                        if (change == 1)

                            goto Metka;

                        break;

                        default:

                            printf("Для выполнения действия напишите 1,2 или 3");

                        break;

                    }

                return 0;

            }

    }

}
